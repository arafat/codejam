Solution Steps
==============

Scan through queries in the order they arrive.
Remove the search engine that matches the first query.
Remove search engine which match a query.
Repeat ablove step until only one search engine is left in the list.
That search engine will be the one which gives us the maximum query scan with out switching.
At this point we need to switch the search engine, add all the search engine back in the list.
Repeat above steps until all the queries are scanned.

Above is a viable start for the solution, keep on looking to optimize.
